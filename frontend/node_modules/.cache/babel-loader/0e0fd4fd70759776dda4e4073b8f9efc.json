{"ast":null,"code":"var _jsxFileName = \"/Users/andre/Temporaria/whticket-soon/Habyb/whatticketsoondes/frontend/src/components/MessagesList/index.js\";\nimport React, { useState, useEffect, useReducer, useRef, useContext } from \"react\";\nimport { isSameDay, parseISO, format } from \"date-fns\";\nimport clsx from \"clsx\";\nimport { green } from \"@material-ui/core/colors\";\nimport { Button, CircularProgress, Divider, IconButton, makeStyles } from \"@material-ui/core\";\nimport { AccessTime, Block, Done, DoneAll, ExpandMore, GetApp } from \"@material-ui/icons\";\nimport MarkdownWrapper from \"../MarkdownWrapper\";\nimport ModalImageCors from \"../ModalImageCors\";\nimport MessageOptionsMenu from \"../MessageOptionsMenu\";\nimport whatsBackground from \"../../assets/wa-background.png\";\nimport LocationPreview from \"../LocationPreview\";\nimport whatsBackgroundDark from \"../../assets/wa-background-dark.png\"; //DARK MODE PLW DESIGN//\nimport VCardPreview from \"../VCardPreview\";\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\nconst useStyles = makeStyles(theme => ({\n  messagesListWrapper: {\n    overflow: \"hidden\",\n    position: \"relative\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    width: \"100%\",\n    minWidth: 300,\n    minHeight: 200\n  },\n  messagesList: {\n    backgroundImage: theme.mode === 'light' ? `url(${whatsBackground})` : `url(${whatsBackgroundDark})`,\n    //DARK MODE PLW DESIGN//\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    padding: \"20px 20px 20px 20px\",\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles\n  },\n  circleLoading: {\n    color: green[500],\n    position: \"absolute\",\n    opacity: \"70%\",\n    top: 0,\n    left: \"50%\",\n    marginTop: 12\n  },\n  messageLeft: {\n    marginRight: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0\n    },\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#ffffff\",\n    color: \"#303030\",\n    alignSelf: \"flex-start\",\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\"\n  },\n  quotedContainerLeft: {\n    margin: \"-3px -80px 6px -6px\",\n    overflow: \"hidden\",\n    backgroundColor: \"#f0f0f0\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\"\n  },\n  quotedMsg: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    display: \"block\",\n    whiteSpace: \"pre-wrap\",\n    overflow: \"hidden\"\n  },\n  quotedSideColorLeft: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#6bcbef\"\n  },\n  messageRight: {\n    marginLeft: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0\n    },\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#dcf8c6\",\n    color: \"#303030\",\n    alignSelf: \"flex-end\",\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 0,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\"\n  },\n  quotedContainerRight: {\n    margin: \"-3px -80px 6px -6px\",\n    overflowY: \"hidden\",\n    backgroundColor: \"#cfe9ba\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\"\n  },\n  quotedMsgRight: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    whiteSpace: \"pre-wrap\"\n  },\n  quotedSideColorRight: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#35cd96\"\n  },\n  messageActionsButton: {\n    display: \"none\",\n    position: \"relative\",\n    color: \"#999\",\n    zIndex: 1,\n    backgroundColor: \"inherit\",\n    opacity: \"90%\",\n    \"&:hover, &.Mui-focusVisible\": {\n      backgroundColor: \"inherit\"\n    }\n  },\n  messageContactName: {\n    display: \"flex\",\n    color: \"#6bcbef\",\n    fontWeight: 500\n  },\n  textContentItem: {\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\"\n  },\n  textContentItemEdited: {\n    overflowWrap: \"break-word\",\n    padding: \"3px 120px 6px 6px\"\n  },\n  textContentItemDeleted: {\n    fontStyle: \"italic\",\n    color: \"rgba(0, 0, 0, 0.36)\",\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\"\n  },\n  messageMedia: {\n    objectFit: \"cover\",\n    width: 250,\n    height: 200,\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8\n  },\n  timestamp: {\n    fontSize: 11,\n    position: \"absolute\",\n    bottom: 0,\n    right: 5,\n    color: \"#999\"\n  },\n  dailyTimestamp: {\n    alignItems: \"center\",\n    textAlign: \"center\",\n    alignSelf: \"center\",\n    width: \"110px\",\n    backgroundColor: \"#e1f3fb\",\n    margin: \"10px\",\n    borderRadius: \"10px\",\n    boxShadow: \"0 1px 1px #b3b3b3\"\n  },\n  dailyTimestampText: {\n    color: \"#808888\",\n    padding: 8,\n    alignSelf: \"center\",\n    marginLeft: \"0px\"\n  },\n  ackIcons: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4\n  },\n  deletedIcon: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginRight: 4\n  },\n  ackDoneAllIcon: {\n    color: green[500],\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4\n  },\n  downloadMedia: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"inherit\",\n    padding: 10\n  }\n}));\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_MESSAGES\") {\n    const messages = action.payload;\n    const newMessages = [];\n    messages.forEach(message => {\n      const messageIndex = state.findIndex(m => m.id === message.id);\n      if (messageIndex !== -1) {\n        state[messageIndex] = message;\n      } else {\n        newMessages.push(message);\n      }\n    });\n    return [...newMessages, ...state];\n  }\n  if (action.type === \"ADD_MESSAGE\") {\n    const newMessage = action.payload;\n    const messageIndex = state.findIndex(m => m.id === newMessage.id);\n    if (messageIndex !== -1) {\n      state[messageIndex] = newMessage;\n    } else {\n      state.push(newMessage);\n    }\n    return [...state];\n  }\n  if (action.type === \"UPDATE_MESSAGE\") {\n    const messageToUpdate = action.payload;\n    const messageIndex = state.findIndex(m => m.id === messageToUpdate.id);\n    if (messageIndex !== -1) {\n      state[messageIndex] = messageToUpdate;\n    }\n    return [...state];\n  }\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\nconst MessagesList = ({\n  ticket,\n  ticketId,\n  isGroup\n}) => {\n  const classes = useStyles();\n  const [messagesList, dispatch] = useReducer(reducer, []);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const lastMessageRef = useRef();\n  const [selectedMessage, setSelectedMessage] = useState({});\n  const [anchorEl, setAnchorEl] = useState(null);\n  const messageOptionsMenuOpen = Boolean(anchorEl);\n  const currentTicketId = useRef(ticketId);\n  const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n  const socketManager = useContext(SocketContext);\n  useEffect(() => {\n    dispatch({\n      type: \"RESET\"\n    });\n    setPageNumber(1);\n    currentTicketId.current = ticketId;\n  }, [ticketId]);\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchMessages = async () => {\n        if (ticketId === undefined) return;\n        try {\n          const {\n            data\n          } = await api.get(\"/messages/\" + ticketId, {\n            params: {\n              pageNumber\n            }\n          });\n          if (currentTicketId.current === ticketId) {\n            dispatch({\n              type: \"LOAD_MESSAGES\",\n              payload: data.messages\n            });\n            setHasMore(data.hasMore);\n            setLoading(false);\n          }\n          if (pageNumber === 1 && data.messages.length > 1) {\n            scrollToBottom();\n          }\n        } catch (err) {\n          setLoading(false);\n          toastError(err);\n        }\n      };\n      fetchMessages();\n    }, 500);\n    return () => {\n      clearTimeout(delayDebounceFn);\n    };\n  }, [pageNumber, ticketId]);\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketManager.getSocket(companyId);\n    socket.on(\"ready\", () => socket.emit(\"joinChatBox\", `${ticket.id}`));\n    socket.on(`company-${companyId}-appMessage`, data => {\n      if (data.action === \"create\" && data.message.ticketId === currentTicketId.current) {\n        dispatch({\n          type: \"ADD_MESSAGE\",\n          payload: data.message\n        });\n        scrollToBottom();\n      }\n      if (data.action === \"update\" && data.message.ticketId === currentTicketId.current) {\n        dispatch({\n          type: \"UPDATE_MESSAGE\",\n          payload: data.message\n        });\n      }\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, [ticketId, ticket, socketManager]);\n  const loadMore = () => {\n    setPageNumber(prevPageNumber => prevPageNumber + 1);\n  };\n  const scrollToBottom = () => {\n    if (lastMessageRef.current) {\n      lastMessageRef.current.scrollIntoView({});\n    }\n  };\n  const handleScroll = e => {\n    if (!hasMore) return;\n    const {\n      scrollTop\n    } = e.currentTarget;\n    if (scrollTop === 0) {\n      document.getElementById(\"messagesList\").scrollTop = 1;\n    }\n    if (loading) {\n      return;\n    }\n    if (scrollTop < 50) {\n      loadMore();\n    }\n  };\n  const handleOpenMessageOptionsMenu = (e, message) => {\n    setAnchorEl(e.currentTarget);\n    setSelectedMessage(message);\n  };\n  const handleCloseMessageOptionsMenu = e => {\n    setAnchorEl(null);\n  };\n  const checkMessageMedia = message => {\n    if (message.mediaType === \"locationMessage\" && message.body.split('|').length >= 2) {\n      let locationParts = message.body.split('|');\n      let imageLocation = locationParts[0];\n      let linkLocation = locationParts[1];\n      let descriptionLocation = null;\n      if (locationParts.length > 2) descriptionLocation = message.body.split('|')[2];\n      return /*#__PURE__*/React.createElement(LocationPreview, {\n        image: imageLocation,\n        link: linkLocation,\n        description: descriptionLocation,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 14\n        }\n      });\n    } else if (message.mediaType === \"contactMessage\") {\n      let array = message.body.split(\"\\n\");\n      let obj = [];\n      let contact = \"\";\n      for (let index = 0; index < array.length; index++) {\n        const v = array[index];\n        let values = v.split(\":\");\n        for (let ind = 0; ind < values.length; ind++) {\n          if (values[ind].indexOf(\"+\") !== -1) {\n            obj.push({\n              number: values[ind]\n            });\n          }\n          if (values[ind].indexOf(\"FN\") !== -1) {\n            contact = values[ind + 1];\n          }\n        }\n      }\n      //console.log(array);\n      //console.log(contact);\n      //console.log(obj[0].number);\n      return /*#__PURE__*/React.createElement(VCardPreview, {\n        contact: contact,\n        numbers: obj[0].number,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 14\n        }\n      });\n    }\n    /* else if (message.mediaType === \"vcard\") {\n      let array = message.body.split(\"\\n\");\n      let obj = [];\n      let contact = \"\";\n      for (let index = 0; index < array.length; index++) {\n        const v = array[index];\n        let values = v.split(\":\");\n        for (let ind = 0; ind < values.length; ind++) {\n          if (values[ind].indexOf(\"+\") !== -1) {\n            obj.push({ number: values[ind] });\n          }\n          if (values[ind].indexOf(\"FN\") !== -1) {\n            contact = values[ind + 1];\n          }\n        }\n      }\n      return <VcardPreview contact={contact} numbers={obj[0].number} />\n    } */\n    /*else if (message.mediaType === \"multi_vcard\") {\n      console.log(\"multi_vcard\")\n      console.log(message)\n      \n      if(message.body !== null && message.body !== \"\") {\n        let newBody = JSON.parse(message.body)\n        return (\n          <>\n            {\n            newBody.map(v => (\n              <VcardPreview contact={v.name} numbers={v.number} />\n            ))\n            }\n          </>\n        )\n      } else return (<></>)\n    }*/else if (message.mediaType === \"image\") {\n      return /*#__PURE__*/React.createElement(ModalImageCors, {\n        imageUrl: message.mediaUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 14\n        }\n      });\n    } else if (message.mediaType === \"audio\") {\n      //console.log(isIOS);\n\n      if (isIOS) {\n        message.mediaUrl = message.mediaUrl.replace(\"ogg\", \"mp3\");\n        return /*#__PURE__*/React.createElement(\"audio\", {\n          controls: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"source\", {\n          src: message.mediaUrl,\n          type: \"audio/mp3\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 13\n          }\n        }));\n      } else {\n        return /*#__PURE__*/React.createElement(\"audio\", {\n          controls: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"source\", {\n          src: message.mediaUrl,\n          type: \"audio/ogg\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 13\n          }\n        }));\n      }\n    } else if (message.mediaType === \"video\") {\n      return /*#__PURE__*/React.createElement(\"video\", {\n        className: classes.messageMedia,\n        src: message.mediaUrl,\n        controls: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 9\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.downloadMedia,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        startIcon: /*#__PURE__*/React.createElement(GetApp, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 26\n          }\n        }),\n        color: \"primary\",\n        variant: \"outlined\",\n        target: \"_blank\",\n        href: message.mediaUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 13\n        }\n      }, \"Download\")), /*#__PURE__*/React.createElement(Divider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 11\n        }\n      }));\n    }\n  };\n\n  /*\n    const renderMessageAck = (message) => {\n      if (message.ack === 1) {\n        return <AccessTime fontSize=\"small\" className={classes.ackIcons} />;\n      }\n      if (message.ack === 2) {\n        return <Done fontSize=\"small\" className={classes.ackIcons} />;\n      }\n      if (message.ack === 3) {\n        return <DoneAll fontSize=\"small\" className={classes.ackIcons} />;\n      }\n      if (message.ack === 4 || message.ack === 5) {\n        return <DoneAll fontSize=\"small\" className={classes.ackDoneAllIcon} />;\n      }\n    };\n    */\n\n  const renderMessageAck = message => {\n    if (message.ack === 0) {\n      return /*#__PURE__*/React.createElement(AccessTime, {\n        fontSize: \"small\",\n        className: classes.ackIcons,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 16\n        }\n      });\n    }\n    if (message.ack === 1) {\n      return /*#__PURE__*/React.createElement(Done, {\n        fontSize: \"small\",\n        className: classes.ackIcons,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 16\n        }\n      });\n    }\n    if (message.ack === 2) {\n      return /*#__PURE__*/React.createElement(Done, {\n        fontSize: \"small\",\n        className: classes.ackIcons,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 16\n        }\n      });\n    }\n    if (message.ack === 3) {\n      return /*#__PURE__*/React.createElement(DoneAll, {\n        fontSize: \"small\",\n        className: classes.ackIcons,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 16\n        }\n      });\n    }\n    if (message.ack === 4 || message.ack === 5) {\n      return /*#__PURE__*/React.createElement(DoneAll, {\n        fontSize: \"small\",\n        className: classes.ackDoneAllIcon,\n        style: {\n          color: '#0377FC'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 16\n        }\n      });\n    }\n  };\n  const renderDailyTimestamps = (message, index) => {\n    if (index === 0) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: classes.dailyTimestamp,\n        key: `timestamp-${message.id}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.dailyTimestampText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 589,\n          columnNumber: 11\n        }\n      }, format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")));\n    }\n    if (index < messagesList.length - 1) {\n      let messageDay = parseISO(messagesList[index].createdAt);\n      let previousMessageDay = parseISO(messagesList[index - 1].createdAt);\n      if (!isSameDay(messageDay, previousMessageDay)) {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          className: classes.dailyTimestamp,\n          key: `timestamp-${message.id}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.dailyTimestampText,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 13\n          }\n        }, format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")));\n      }\n    }\n    if (index === messagesList.length - 1) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: `ref-${message.createdAt}`,\n        ref: lastMessageRef,\n        style: {\n          float: \"left\",\n          clear: \"both\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 9\n        }\n      });\n    }\n  };\n  const renderNumberTicket = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n      var _message$ticket, _message$ticket$whats;\n      let messageTicket = message.ticketId;\n      let connectionName = (_message$ticket = message.ticket) === null || _message$ticket === void 0 ? void 0 : (_message$ticket$whats = _message$ticket.whatsapp) === null || _message$ticket$whats === void 0 ? void 0 : _message$ticket$whats.name;\n      let previousMessageTicket = messagesList[index - 1].ticketId;\n      if (messageTicket !== previousMessageTicket) {\n        return /*#__PURE__*/React.createElement(\"center\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 632,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.ticketNunberClosed,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 633,\n            columnNumber: 13\n          }\n        }, \"Conversa encerrada: \", format(parseISO(messagesList[index - 1].createdAt), \"dd/MM/yyyy HH:mm:ss\")), /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.ticketNunberOpen,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 13\n          }\n        }, \"Conversa iniciada: \", format(parseISO(message.createdAt), \"dd/MM/yyyy HH:mm:ss\")));\n      }\n    }\n  };\n  const renderMessageDivider = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n      let messageUser = messagesList[index].fromMe;\n      let previousMessageUser = messagesList[index - 1].fromMe;\n      if (messageUser !== previousMessageUser) {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            marginTop: 16\n          },\n          key: `divider-${message.id}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 653,\n            columnNumber: 11\n          }\n        });\n      }\n    }\n  };\n  const renderQuotedMessage = message => {\n    var _message$quotedMsg, _message$quotedMsg2, _message$quotedMsg3, _message$quotedMsg3$c, _message$quotedMsg4;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: clsx(classes.quotedContainerLeft, {\n        [classes.quotedContainerRight]: message.fromMe\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 661,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: clsx(classes.quotedSideColorLeft, {\n        [classes.quotedSideColorRight]: (_message$quotedMsg = message.quotedMsg) === null || _message$quotedMsg === void 0 ? void 0 : _message$quotedMsg.fromMe\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.quotedMsg,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 9\n      }\n    }, !((_message$quotedMsg2 = message.quotedMsg) === null || _message$quotedMsg2 === void 0 ? void 0 : _message$quotedMsg2.fromMe) && /*#__PURE__*/React.createElement(\"span\", {\n      className: classes.messageContactName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 673,\n        columnNumber: 13\n      }\n    }, (_message$quotedMsg3 = message.quotedMsg) === null || _message$quotedMsg3 === void 0 ? void 0 : (_message$quotedMsg3$c = _message$quotedMsg3.contact) === null || _message$quotedMsg3$c === void 0 ? void 0 : _message$quotedMsg3$c.name), message.quotedMsg.mediaType === \"audio\" && /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.downloadMedia,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 680,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"audio\", {\n      controls: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"source\", {\n      src: message.quotedMsg.mediaUrl,\n      type: \"audio/ogg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 682,\n        columnNumber: 19\n      }\n    }))), message.quotedMsg.mediaType === \"video\" && /*#__PURE__*/React.createElement(\"video\", {\n      className: classes.messageMedia,\n      src: message.quotedMsg.mediaUrl,\n      controls: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 689,\n        columnNumber: 15\n      }\n    }), message.quotedMsg.mediaType === \"application\" && /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.downloadMedia,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 698,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      startIcon: /*#__PURE__*/React.createElement(GetApp, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 700,\n          columnNumber: 30\n        }\n      }),\n      color: \"primary\",\n      variant: \"outlined\",\n      target: \"_blank\",\n      href: message.quotedMsg.mediaUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 699,\n        columnNumber: 17\n      }\n    }, \"Download\")), message.quotedMsg.mediaType === \"image\" && /*#__PURE__*/React.createElement(ModalImageCors, {\n      imageUrl: message.quotedMsg.mediaUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 714,\n        columnNumber: 15\n      }\n    }) || ((_message$quotedMsg4 = message.quotedMsg) === null || _message$quotedMsg4 === void 0 ? void 0 : _message$quotedMsg4.body)));\n  };\n  const renderMessages = () => {\n    if (messagesList.length > 0) {\n      const viewMessagesList = messagesList.map((message, index) => {\n        if (message.mediaType === \"call_log\") {\n          var _message$contact;\n          return /*#__PURE__*/React.createElement(React.Fragment, {\n            key: message.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 728,\n              columnNumber: 13\n            }\n          }, renderDailyTimestamps(message, index), renderNumberTicket(message, index), renderMessageDivider(message, index), /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.messageCenter,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 732,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(IconButton, {\n            variant: \"contained\",\n            size: \"small\",\n            id: \"messageActionsButton\",\n            disabled: message.isDeleted,\n            className: classes.messageActionsButton,\n            onClick: e => handleOpenMessageOptionsMenu(e, message),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 733,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(ExpandMore, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 19\n            }\n          })), isGroup && /*#__PURE__*/React.createElement(\"span\", {\n            className: classes.messageContactName,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 744,\n              columnNumber: 19\n            }\n          }, (_message$contact = message.contact) === null || _message$contact === void 0 ? void 0 : _message$contact.name), /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 748,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 20 17\",\n            width: \"20\",\n            height: \"17\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 749,\n              columnNumber: 19\n            }\n          }, /*#__PURE__*/React.createElement(\"path\", {\n            fill: \"#df3333\",\n            d: \"M18.2 12.1c-1.5-1.8-5-2.7-8.2-2.7s-6.7 1-8.2 2.7c-.7.8-.3 2.3.2 2.8.2.2.3.3.5.3 1.4 0 3.6-.7 3.6-.7.5-.2.8-.5.8-1v-1.3c.7-1.2 5.4-1.2 6.4-.1l.1.1v1.3c0 .2.1.4.2.6.1.2.3.3.5.4 0 0 2.2.7 3.6.7.2 0 1.4-2 .5-3.1zM5.4 3.2l4.7 4.6 5.8-5.7-.9-.8L10.1 6 6.4 2.3h2.5V1H4.1v4.8h1.3V3.2z\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 750,\n              columnNumber: 21\n            }\n          })), \" \", /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 751,\n              columnNumber: 26\n            }\n          }, \"Chamada de voz/v\\xEDdeo perdida \\xE0s \", format(parseISO(message.createdAt), \"HH:mm\")))));\n        }\n        if (!message.fromMe) {\n          var _message$contact2;\n          return /*#__PURE__*/React.createElement(React.Fragment, {\n            key: message.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 760,\n              columnNumber: 13\n            }\n          }, renderDailyTimestamps(message, index), renderNumberTicket(message, index), renderMessageDivider(message, index), /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.messageLeft,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 764,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(IconButton, {\n            variant: \"contained\",\n            size: \"small\",\n            id: \"messageActionsButton\",\n            disabled: message.isDeleted,\n            className: classes.messageActionsButton,\n            onClick: e => handleOpenMessageOptionsMenu(e, message),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 765,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(ExpandMore, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 773,\n              columnNumber: 19\n            }\n          })), isGroup && /*#__PURE__*/React.createElement(\"span\", {\n            className: classes.messageContactName,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 776,\n              columnNumber: 19\n            }\n          }, (_message$contact2 = message.contact) === null || _message$contact2 === void 0 ? void 0 : _message$contact2.name), message.isDeleted && /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 783,\n              columnNumber: 19\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"message-deleted\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 784,\n              columnNumber: 21\n            }\n          }, \"Essa mensagem foi apagada pelo contato \\xA0\", /*#__PURE__*/React.createElement(Block, {\n            color: \"error\",\n            fontSize: \"small\",\n            className: classes.deletedIcon,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 786,\n              columnNumber: 23\n            }\n          }))), (message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\" || message.mediaType === \"contactMessage\"\n          //|| message.mediaType === \"multi_vcard\" \n          ) && checkMessageMedia(message), /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.textContentItem,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 798,\n              columnNumber: 17\n            }\n          }, message.quotedMsg && renderQuotedMessage(message), /*#__PURE__*/React.createElement(MarkdownWrapper, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 800,\n              columnNumber: 19\n            }\n          }, message.mediaType === \"locationMessage\" || message.mediaType === \"contactMessage\" ? null : message.body), /*#__PURE__*/React.createElement(\"span\", {\n            className: classes.timestamp,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 803,\n              columnNumber: 19\n            }\n          }, format(parseISO(message.createdAt), \"HH:mm\")))));\n        } else {\n          return /*#__PURE__*/React.createElement(React.Fragment, {\n            key: message.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 812,\n              columnNumber: 13\n            }\n          }, renderDailyTimestamps(message, index), renderNumberTicket(message, index), renderMessageDivider(message, index), /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.messageRight,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 816,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(IconButton, {\n            variant: \"contained\",\n            size: \"small\",\n            id: \"messageActionsButton\",\n            disabled: message.isDeleted,\n            className: classes.messageActionsButton,\n            onClick: e => handleOpenMessageOptionsMenu(e, message),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 817,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(ExpandMore, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 825,\n              columnNumber: 19\n            }\n          })), (message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\" || message.mediaType === \"contactMessage\"\n          //|| message.mediaType === \"multi_vcard\" \n          ) && checkMessageMedia(message), /*#__PURE__*/React.createElement(\"div\", {\n            className: clsx(classes.textContentItem, {\n              [classes.textContentItemDeleted]: message.isDeleted\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 830,\n              columnNumber: 17\n            }\n          }, message.isDeleted && /*#__PURE__*/React.createElement(Block, {\n            color: \"disabled\",\n            fontSize: \"small\",\n            className: classes.deletedIcon,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 836,\n              columnNumber: 21\n            }\n          }), message.quotedMsg && renderQuotedMessage(message), /*#__PURE__*/React.createElement(MarkdownWrapper, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 843,\n              columnNumber: 19\n            }\n          }, message.body), /*#__PURE__*/React.createElement(\"span\", {\n            className: classes.timestamp,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 844,\n              columnNumber: 19\n            }\n          }, format(parseISO(message.createdAt), \"HH:mm\"), renderMessageAck(message)))));\n        }\n      });\n      return viewMessagesList;\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 856,\n          columnNumber: 14\n        }\n      }, \"Diga ol\\xE1 para seu novo contato!\");\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.messagesListWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 861,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MessageOptionsMenu, {\n    message: selectedMessage,\n    anchorEl: anchorEl,\n    menuOpen: messageOptionsMenuOpen,\n    handleClose: handleCloseMessageOptionsMenu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 862,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"messagesList\",\n    className: classes.messagesList,\n    onScroll: handleScroll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 868,\n      columnNumber: 7\n    }\n  }, messagesList.length > 0 ? renderMessages() : []), loading && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 876,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    className: classes.circleLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 877,\n      columnNumber: 11\n    }\n  })));\n};\nexport default MessagesList;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useRef","useContext","isSameDay","parseISO","format","clsx","green","Button","CircularProgress","Divider","IconButton","makeStyles","AccessTime","Block","Done","DoneAll","ExpandMore","GetApp","MarkdownWrapper","ModalImageCors","MessageOptionsMenu","whatsBackground","LocationPreview","whatsBackgroundDark","VCardPreview","api","toastError","SocketContext","useStyles","theme","messagesListWrapper","overflow","position","display","flexDirection","flexGrow","width","minWidth","minHeight","messagesList","backgroundImage","mode","padding","overflowY","scrollbarStyles","circleLoading","color","opacity","top","left","marginTop","messageLeft","marginRight","maxWidth","height","right","whiteSpace","backgroundColor","alignSelf","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","paddingLeft","paddingRight","paddingTop","paddingBottom","boxShadow","quotedContainerLeft","margin","borderRadius","quotedMsg","quotedSideColorLeft","flex","messageRight","marginLeft","quotedContainerRight","quotedMsgRight","quotedSideColorRight","messageActionsButton","zIndex","messageContactName","fontWeight","textContentItem","overflowWrap","textContentItemEdited","textContentItemDeleted","fontStyle","messageMedia","objectFit","timestamp","fontSize","bottom","dailyTimestamp","alignItems","textAlign","dailyTimestampText","ackIcons","verticalAlign","deletedIcon","ackDoneAllIcon","downloadMedia","justifyContent","reducer","state","action","type","messages","payload","newMessages","forEach","message","messageIndex","findIndex","m","id","push","newMessage","messageToUpdate","MessagesList","ticket","ticketId","isGroup","classes","dispatch","pageNumber","setPageNumber","hasMore","setHasMore","loading","setLoading","lastMessageRef","selectedMessage","setSelectedMessage","anchorEl","setAnchorEl","messageOptionsMenuOpen","Boolean","currentTicketId","isIOS","test","navigator","userAgent","window","MSStream","socketManager","current","delayDebounceFn","setTimeout","fetchMessages","undefined","data","get","params","length","scrollToBottom","err","clearTimeout","companyId","localStorage","getItem","socket","getSocket","on","emit","disconnect","loadMore","prevPageNumber","scrollIntoView","handleScroll","e","scrollTop","currentTarget","document","getElementById","handleOpenMessageOptionsMenu","handleCloseMessageOptionsMenu","checkMessageMedia","mediaType","body","split","locationParts","imageLocation","linkLocation","descriptionLocation","createElement","image","link","description","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","array","obj","contact","index","v","values","ind","indexOf","number","numbers","imageUrl","mediaUrl","replace","controls","src","className","Fragment","startIcon","variant","target","href","renderMessageAck","ack","style","renderDailyTimestamps","key","createdAt","messageDay","previousMessageDay","ref","float","clear","renderNumberTicket","_message$ticket","_message$ticket$whats","messageTicket","connectionName","whatsapp","name","previousMessageTicket","ticketNunberClosed","ticketNunberOpen","renderMessageDivider","messageUser","fromMe","previousMessageUser","renderQuotedMessage","_message$quotedMsg","_message$quotedMsg2","_message$quotedMsg3","_message$quotedMsg3$c","_message$quotedMsg4","renderMessages","viewMessagesList","map","_message$contact","messageCenter","size","disabled","isDeleted","onClick","xmlns","viewBox","fill","d","_message$contact2","menuOpen","handleClose","onScroll"],"sources":["/Users/andre/Temporaria/whticket-soon/Habyb/whatticketsoondes/frontend/src/components/MessagesList/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useRef, useContext } from \"react\";\n\nimport { isSameDay, parseISO, format } from \"date-fns\";\nimport clsx from \"clsx\";\n\nimport { green } from \"@material-ui/core/colors\";\nimport {\n  Button,\n  CircularProgress,\n  Divider,\n  IconButton,\n  makeStyles,\n} from \"@material-ui/core\";\n\nimport {\n  AccessTime,\n  Block,\n  Done,\n  DoneAll,\n  ExpandMore,\n  GetApp,\n} from \"@material-ui/icons\";\n\nimport MarkdownWrapper from \"../MarkdownWrapper\";\nimport ModalImageCors from \"../ModalImageCors\";\nimport MessageOptionsMenu from \"../MessageOptionsMenu\";\nimport whatsBackground from \"../../assets/wa-background.png\";\nimport LocationPreview from \"../LocationPreview\";\nimport whatsBackgroundDark from \"../../assets/wa-background-dark.png\"; //DARK MODE PLW DESIGN//\nimport VCardPreview from \"../VCardPreview\";\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  messagesListWrapper: {\n    overflow: \"hidden\",\n    position: \"relative\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    width: \"100%\",\n    minWidth: 300,\n    minHeight: 200,\n  },\n\n  messagesList: {\n    backgroundImage: theme.mode === 'light' ? `url(${whatsBackground})` : `url(${whatsBackgroundDark})`, //DARK MODE PLW DESIGN//\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    padding: \"20px 20px 20px 20px\",\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n\n  circleLoading: {\n    color: green[500],\n    position: \"absolute\",\n    opacity: \"70%\",\n    top: 0,\n    left: \"50%\",\n    marginTop: 12,\n  },\n\n  messageLeft: {\n    marginRight: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n    },\n\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#ffffff\",\n    color: \"#303030\",\n    alignSelf: \"flex-start\",\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  quotedContainerLeft: {\n    margin: \"-3px -80px 6px -6px\",\n    overflow: \"hidden\",\n    backgroundColor: \"#f0f0f0\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\",\n  },\n\n  quotedMsg: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    display: \"block\",\n    whiteSpace: \"pre-wrap\",\n    overflow: \"hidden\",\n  },\n\n  quotedSideColorLeft: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#6bcbef\",\n  },\n\n  messageRight: {\n    marginLeft: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n    },\n\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#dcf8c6\",\n    color: \"#303030\",\n    alignSelf: \"flex-end\",\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 0,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  quotedContainerRight: {\n    margin: \"-3px -80px 6px -6px\",\n    overflowY: \"hidden\",\n    backgroundColor: \"#cfe9ba\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\",\n  },\n\n  quotedMsgRight: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    whiteSpace: \"pre-wrap\",\n  },\n\n  quotedSideColorRight: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#35cd96\",\n  },\n\n  messageActionsButton: {\n    display: \"none\",\n    position: \"relative\",\n    color: \"#999\",\n    zIndex: 1,\n    backgroundColor: \"inherit\",\n    opacity: \"90%\",\n    \"&:hover, &.Mui-focusVisible\": { backgroundColor: \"inherit\" },\n  },\n\n  messageContactName: {\n    display: \"flex\",\n    color: \"#6bcbef\",\n    fontWeight: 500,\n  },\n\n  textContentItem: {\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\",\n  },\n  \n  textContentItemEdited: {\n    overflowWrap: \"break-word\",\n    padding: \"3px 120px 6px 6px\",\n  },\n\n  textContentItemDeleted: {\n    fontStyle: \"italic\",\n    color: \"rgba(0, 0, 0, 0.36)\",\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\",\n  },\n\n  messageMedia: {\n    objectFit: \"cover\",\n    width: 250,\n    height: 200,\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n  },\n\n  timestamp: {\n    fontSize: 11,\n    position: \"absolute\",\n    bottom: 0,\n    right: 5,\n    color: \"#999\",\n  },\n\n  dailyTimestamp: {\n    alignItems: \"center\",\n    textAlign: \"center\",\n    alignSelf: \"center\",\n    width: \"110px\",\n    backgroundColor: \"#e1f3fb\",\n    margin: \"10px\",\n    borderRadius: \"10px\",\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  dailyTimestampText: {\n    color: \"#808888\",\n    padding: 8,\n    alignSelf: \"center\",\n    marginLeft: \"0px\",\n  },\n\n  ackIcons: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4,\n  },\n\n  deletedIcon: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginRight: 4,\n  },\n\n  ackDoneAllIcon: {\n    color: green[500],\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4,\n  },\n\n  downloadMedia: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"inherit\",\n    padding: 10,\n  },\n}));\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_MESSAGES\") {\n    const messages = action.payload;\n    const newMessages = [];\n\n    messages.forEach((message) => {\n      const messageIndex = state.findIndex((m) => m.id === message.id);\n      if (messageIndex !== -1) {\n        state[messageIndex] = message;\n      } else {\n        newMessages.push(message);\n      }\n    });\n\n    return [...newMessages, ...state];\n  }\n\n  if (action.type === \"ADD_MESSAGE\") {\n    const newMessage = action.payload;\n    const messageIndex = state.findIndex((m) => m.id === newMessage.id);\n\n    if (messageIndex !== -1) {\n      state[messageIndex] = newMessage;\n    } else {\n      state.push(newMessage);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_MESSAGE\") {\n    const messageToUpdate = action.payload;\n    const messageIndex = state.findIndex((m) => m.id === messageToUpdate.id);\n\n    if (messageIndex !== -1) {\n      state[messageIndex] = messageToUpdate;\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst MessagesList = ({ ticket, ticketId, isGroup }) => {\n  const classes = useStyles();\n\n  const [messagesList, dispatch] = useReducer(reducer, []);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const lastMessageRef = useRef();\n\n  const [selectedMessage, setSelectedMessage] = useState({});\n  const [anchorEl, setAnchorEl] = useState(null);\n  const messageOptionsMenuOpen = Boolean(anchorEl);\n  const currentTicketId = useRef(ticketId);\n  const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n  const socketManager = useContext(SocketContext);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n\n    currentTicketId.current = ticketId;\n  }, [ticketId]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchMessages = async () => {\n        if (ticketId === undefined) return;\n        try {\n          const { data } = await api.get(\"/messages/\" + ticketId, {\n            params: { pageNumber },\n          });\n\n          if (currentTicketId.current === ticketId) {\n            dispatch({ type: \"LOAD_MESSAGES\", payload: data.messages });\n            setHasMore(data.hasMore);\n            setLoading(false);\n          }\n\n          if (pageNumber === 1 && data.messages.length > 1) {\n            scrollToBottom();\n          }\n        } catch (err) {\n          setLoading(false);\n          toastError(err);\n        }\n      };\n      fetchMessages();\n    }, 500);\n    return () => {\n      clearTimeout(delayDebounceFn);\n    };\n  }, [pageNumber, ticketId]);\n\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketManager.getSocket(companyId);\n\n    socket.on(\"ready\", () => socket.emit(\"joinChatBox\", `${ticket.id}`));\n\n    socket.on(`company-${companyId}-appMessage`, (data) => {\n      if (data.action === \"create\" && data.message.ticketId === currentTicketId.current) {\n        dispatch({ type: \"ADD_MESSAGE\", payload: data.message });\n        scrollToBottom();\n      }\n\n      if (data.action === \"update\" && data.message.ticketId === currentTicketId.current) {\n        dispatch({ type: \"UPDATE_MESSAGE\", payload: data.message });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, [ticketId, ticket, socketManager]);\n\n  const loadMore = () => {\n    setPageNumber((prevPageNumber) => prevPageNumber + 1);\n  };\n\n  const scrollToBottom = () => {\n    if (lastMessageRef.current) {\n      lastMessageRef.current.scrollIntoView({});\n    }\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore) return;\n    const { scrollTop } = e.currentTarget;\n\n    if (scrollTop === 0) {\n      document.getElementById(\"messagesList\").scrollTop = 1;\n    }\n\n    if (loading) {\n      return;\n    }\n\n    if (scrollTop < 50) {\n      loadMore();\n    }\n  };\n\n  const handleOpenMessageOptionsMenu = (e, message) => {\n    setAnchorEl(e.currentTarget);\n    setSelectedMessage(message);\n  };\n\n  const handleCloseMessageOptionsMenu = (e) => {\n    setAnchorEl(null);\n  };\n\n  const checkMessageMedia = (message) => {\n    if (message.mediaType === \"locationMessage\" && message.body.split('|').length >= 2) {\n      let locationParts = message.body.split('|')\n      let imageLocation = locationParts[0]\n      let linkLocation = locationParts[1]\n\n      let descriptionLocation = null\n\n      if (locationParts.length > 2)\n        descriptionLocation = message.body.split('|')[2]\n\n      return <LocationPreview image={imageLocation} link={linkLocation} description={descriptionLocation} />\n    }\n    else\n    if (message.mediaType === \"contactMessage\") {\n      let array = message.body.split(\"\\n\");\n      let obj = [];\n      let contact = \"\";\n      for (let index = 0; index < array.length; index++) {\n        const v = array[index];\n        let values = v.split(\":\");\n        for (let ind = 0; ind < values.length; ind++) {\n          if (values[ind].indexOf(\"+\") !== -1) {\n            obj.push({ number: values[ind] });\n          }\n          if (values[ind].indexOf(\"FN\") !== -1) {\n            contact = values[ind + 1];\n          }\n        }\n      }\n      //console.log(array);\n      //console.log(contact);\n      //console.log(obj[0].number);\n      return <VCardPreview contact={contact} numbers={obj[0].number} />\n    }\n    /* else if (message.mediaType === \"vcard\") {\n      let array = message.body.split(\"\\n\");\n      let obj = [];\n      let contact = \"\";\n      for (let index = 0; index < array.length; index++) {\n        const v = array[index];\n        let values = v.split(\":\");\n        for (let ind = 0; ind < values.length; ind++) {\n          if (values[ind].indexOf(\"+\") !== -1) {\n            obj.push({ number: values[ind] });\n          }\n          if (values[ind].indexOf(\"FN\") !== -1) {\n            contact = values[ind + 1];\n          }\n        }\n      }\n      return <VcardPreview contact={contact} numbers={obj[0].number} />\n    } */\n    /*else if (message.mediaType === \"multi_vcard\") {\n      console.log(\"multi_vcard\")\n      console.log(message)\n      \n      if(message.body !== null && message.body !== \"\") {\n        let newBody = JSON.parse(message.body)\n        return (\n          <>\n            {\n            newBody.map(v => (\n              <VcardPreview contact={v.name} numbers={v.number} />\n            ))\n            }\n          </>\n        )\n      } else return (<></>)\n    }*/\n    else if (message.mediaType === \"image\") {\n      return <ModalImageCors imageUrl={message.mediaUrl} />;\n    } else if (message.mediaType === \"audio\") {\n\n      //console.log(isIOS);\n\n      if (isIOS) {\n        message.mediaUrl = message.mediaUrl.replace(\"ogg\", \"mp3\");\n\n        return (\n          <audio controls>\n            <source src={message.mediaUrl} type=\"audio/mp3\"></source>\n          </audio>\n        );\n      } else {\n\n        return (\n          <audio controls>\n            <source src={message.mediaUrl} type=\"audio/ogg\"></source>\n          </audio>\n        );\n      }\n    } else if (message.mediaType === \"video\") {\n      return (\n        <video\n          className={classes.messageMedia}\n          src={message.mediaUrl}\n          controls\n        />\n      );\n    } else {\n      return (\n        <>\n          <div className={classes.downloadMedia}>\n            <Button\n              startIcon={<GetApp />}\n              color=\"primary\"\n              variant=\"outlined\"\n              target=\"_blank\"\n              href={message.mediaUrl}\n            >\n              Download\n            </Button>\n          </div>\n          <Divider />\n        </>\n      );\n    }\n};\n\n  /*\n    const renderMessageAck = (message) => {\n      if (message.ack === 1) {\n        return <AccessTime fontSize=\"small\" className={classes.ackIcons} />;\n      }\n      if (message.ack === 2) {\n        return <Done fontSize=\"small\" className={classes.ackIcons} />;\n      }\n      if (message.ack === 3) {\n        return <DoneAll fontSize=\"small\" className={classes.ackIcons} />;\n      }\n      if (message.ack === 4 || message.ack === 5) {\n        return <DoneAll fontSize=\"small\" className={classes.ackDoneAllIcon} />;\n      }\n    };\n    */\n\n    const renderMessageAck = (message) => {\n      if (message.ack === 0) {\n        return <AccessTime fontSize=\"small\" className={classes.ackIcons} />;\n      }\n      if (message.ack === 1) {\n        return <Done fontSize=\"small\" className={classes.ackIcons} />;\n      }\n      if (message.ack === 2) {\n        return <Done fontSize=\"small\" className={classes.ackIcons} />;\n      }\n      if (message.ack === 3) {\n        return <DoneAll fontSize=\"small\" className={classes.ackIcons} />;\n      }\n      if (message.ack === 4 || message.ack === 5) {\n        return <DoneAll fontSize=\"small\" className={classes.ackDoneAllIcon} style={{color:'#0377FC'}} />;\n      }\n    };\n\n  const renderDailyTimestamps = (message, index) => {\n    if (index === 0) {\n      return (\n        <span\n          className={classes.dailyTimestamp}\n          key={`timestamp-${message.id}`}\n        >\n          <div className={classes.dailyTimestampText}>\n            {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\n          </div>\n        </span>\n      );\n    }\n    if (index < messagesList.length - 1) {\n      let messageDay = parseISO(messagesList[index].createdAt);\n      let previousMessageDay = parseISO(messagesList[index - 1].createdAt);\n\n      if (!isSameDay(messageDay, previousMessageDay)) {\n        return (\n          <span\n            className={classes.dailyTimestamp}\n            key={`timestamp-${message.id}`}\n          >\n            <div className={classes.dailyTimestampText}>\n              {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\n            </div>\n          </span>\n        );\n      }\n    }\n    if (index === messagesList.length - 1) {\n      return (\n        <div\n          key={`ref-${message.createdAt}`}\n          ref={lastMessageRef}\n          style={{ float: \"left\", clear: \"both\" }}\n        />\n      );\n    }\n  };\n\n  const renderNumberTicket = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n\n      let messageTicket = message.ticketId;\n      let connectionName = message.ticket?.whatsapp?.name;\n      let previousMessageTicket = messagesList[index - 1].ticketId;\n\n      if (messageTicket !== previousMessageTicket) {\n        return (\n          <center>\n            <div className={classes.ticketNunberClosed}>\n              Conversa encerrada: {format(parseISO(messagesList[index - 1].createdAt), \"dd/MM/yyyy HH:mm:ss\")}\n            </div>\n\n            <div className={classes.ticketNunberOpen}>\n              Conversa iniciada: {format(parseISO(message.createdAt), \"dd/MM/yyyy HH:mm:ss\")}\n            </div>\n          </center>\n        );\n      }\n    }\n  };\n\n  const renderMessageDivider = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n      let messageUser = messagesList[index].fromMe;\n      let previousMessageUser = messagesList[index - 1].fromMe;\n\n      if (messageUser !== previousMessageUser) {\n        return (\n          <span style={{ marginTop: 16 }} key={`divider-${message.id}`}></span>\n        );\n      }\n    }\n  };\n\n  const renderQuotedMessage = (message) => {\n    return (\n      <div\n        className={clsx(classes.quotedContainerLeft, {\n          [classes.quotedContainerRight]: message.fromMe,\n        })}\n      >\n        <span\n          className={clsx(classes.quotedSideColorLeft, {\n            [classes.quotedSideColorRight]: message.quotedMsg?.fromMe,\n          })}\n        ></span>\n        <div className={classes.quotedMsg}>\n          {!message.quotedMsg?.fromMe && (\n            <span className={classes.messageContactName}>\n              {message.quotedMsg?.contact?.name}\n            </span>\n          )}\n\n          {message.quotedMsg.mediaType === \"audio\"\n            && (\n              <div className={classes.downloadMedia}>\n                <audio controls>\n                  <source src={message.quotedMsg.mediaUrl} type=\"audio/ogg\"></source>\n                </audio>\n              </div>\n            )\n          }\n          {message.quotedMsg.mediaType === \"video\"\n            && (\n              <video\n                className={classes.messageMedia}\n                src={message.quotedMsg.mediaUrl}\n                controls\n              />\n            )\n          }\n          {message.quotedMsg.mediaType === \"application\"\n            && (\n              <div className={classes.downloadMedia}>\n                <Button\n                  startIcon={<GetApp />}\n                  color=\"primary\"\n                  variant=\"outlined\"\n                  target=\"_blank\"\n                  href={message.quotedMsg.mediaUrl}\n                >\n                  Download\n                </Button>\n              </div>\n            )\n          }\n\n          {message.quotedMsg.mediaType === \"image\"\n            && (\n              <ModalImageCors imageUrl={message.quotedMsg.mediaUrl} />)\n            || message.quotedMsg?.body}\n\n        </div>\n      </div>\n    );\n  };\n\n  const renderMessages = () => {\n    if (messagesList.length > 0) {\n      const viewMessagesList = messagesList.map((message, index) => {\n\n        if (message.mediaType === \"call_log\") {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderNumberTicket(message, index)}\n              {renderMessageDivider(message, index)}\n              <div className={classes.messageCenter}>\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n                {isGroup && (\n                  <span className={classes.messageContactName}>\n                    {message.contact?.name}\n                  </span>\n                )}\n                <div>\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 17\" width=\"20\" height=\"17\">\n                    <path fill=\"#df3333\" d=\"M18.2 12.1c-1.5-1.8-5-2.7-8.2-2.7s-6.7 1-8.2 2.7c-.7.8-.3 2.3.2 2.8.2.2.3.3.5.3 1.4 0 3.6-.7 3.6-.7.5-.2.8-.5.8-1v-1.3c.7-1.2 5.4-1.2 6.4-.1l.1.1v1.3c0 .2.1.4.2.6.1.2.3.3.5.4 0 0 2.2.7 3.6.7.2 0 1.4-2 .5-3.1zM5.4 3.2l4.7 4.6 5.8-5.7-.9-.8L10.1 6 6.4 2.3h2.5V1H4.1v4.8h1.3V3.2z\"></path>\n                  </svg> <span>Chamada de voz/vdeo perdida s {format(parseISO(message.createdAt), \"HH:mm\")}</span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        }\n\n        if (!message.fromMe) {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderNumberTicket(message, index)}\n              {renderMessageDivider(message, index)}\n              <div className={classes.messageLeft}>\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n                {isGroup && (\n                  <span className={classes.messageContactName}>\n                    {message.contact?.name}\n                  </span>\n                )}\n\n                {/* aviso de mensagem apagado pelo contato */}\n                {message.isDeleted && (\n                  <div>\n                    <span className={\"message-deleted\"}\n                    >Essa mensagem foi apagada pelo contato &nbsp;\n                      <Block\n                        color=\"error\"\n                        fontSize=\"small\"\n                        className={classes.deletedIcon}\n                      />\n                    </span>\n                  </div>\n                )}\n\n                {(message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\" || message.mediaType === \"contactMessage\"\n                  //|| message.mediaType === \"multi_vcard\" \n                ) && checkMessageMedia(message)}\n                <div className={classes.textContentItem}>\n                  {message.quotedMsg && renderQuotedMessage(message)}\n                  <MarkdownWrapper>\n                    {message.mediaType === \"locationMessage\" || message.mediaType === \"contactMessage\" ? null : message.body}\n                  </MarkdownWrapper>\n                  <span className={classes.timestamp}>\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\n                  </span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        } else {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderNumberTicket(message, index)}\n              {renderMessageDivider(message, index)}\n              <div className={classes.messageRight}>\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n                {(message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\" || message.mediaType === \"contactMessage\"\n                  //|| message.mediaType === \"multi_vcard\" \n                ) && checkMessageMedia(message)}\n                <div\n                  className={clsx(classes.textContentItem, {\n                    [classes.textContentItemDeleted]: message.isDeleted,\n                  })}\n                >\n                  {message.isDeleted && (\n                    <Block\n                      color=\"disabled\"\n                      fontSize=\"small\"\n                      className={classes.deletedIcon}\n                    />\n                  )}\n                  {message.quotedMsg && renderQuotedMessage(message)}\n                  <MarkdownWrapper>{message.body}</MarkdownWrapper>\n                  <span className={classes.timestamp}>\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\n                    {renderMessageAck(message)}\n                  </span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        }\n      });\n      return viewMessagesList;\n    } else {\n      return <div>Diga ol para seu novo contato!</div>;\n    }\n  };\n\n  return (\n    <div className={classes.messagesListWrapper}>\n      <MessageOptionsMenu\n        message={selectedMessage}\n        anchorEl={anchorEl}\n        menuOpen={messageOptionsMenuOpen}\n        handleClose={handleCloseMessageOptionsMenu}\n      />\n      <div\n        id=\"messagesList\"\n        className={classes.messagesList}\n        onScroll={handleScroll}\n      >\n        {messagesList.length > 0 ? renderMessages() : []}\n      </div>\n      {loading && (\n        <div>\n          <CircularProgress className={classes.circleLoading} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MessagesList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}